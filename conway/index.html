<!DOCTYPE html>
<html>

<head>
    <title>HTML Canvas Demo</title>
    <style>
        canvas {
            border: 1px solid #000;
        }
    </style>
</head>

<body>
    <canvas id="canvas" width="600" height="600"></canvas>
    <script>

        function Cell(row, col, grid) {
            this.row = row;
            this.col = col;
            this.grid = grid;
            this.isAliveRightNow = 0;
            this.isAliveNextTime = 0;
            this.getFillStyle = () => (this.isAliveRightNow ? "#0f0" : "#000");
        }

        let canvas = document.getElementById('canvas');
        let ctx = canvas.getContext("2d");
        ctx.fillStyle = "#060";
        ctx.fillRect(0,0,canvas.width,canvas.height);
        const GRID_SIZE = 10;
        const ROWS = canvas.width / GRID_SIZE;
        const COLS = canvas.height / GRID_SIZE;

        let rows = new Array(ROWS).fill(0);
        let grid = rows.map(row => new Array(COLS).fill(0));
        for (let row = 0; row < grid.length; row++) {
            for (let col = 0; col < grid[0].length; col++) {
                grid[row][col] = new Cell(row,col,grid);
            }
        }
        console.log(grid);        

        let render = function (grid) {
            for (let row = 0; row < grid.length; row++) {
                for (let col = 0; col < grid[0].length; col++) {
                    let cell = grid[row][col];
                    let x = GRID_SIZE * row;
                    let y = GRID_SIZE * col;
                    ctx.fillStyle = cell.getFillStyle();
                    ctx.fillRect(x+1, y+1, GRID_SIZE-1, GRID_SIZE-1);
                }
            }
        }
        render(grid);
        canvas.onclick = function (evt) {
            let bounds = canvas.getBoundingClientRect();
            let canvasX = evt.x - bounds.left;
            let canvasY = evt.y - bounds.top;
            let row = Math.floor(canvasX / GRID_SIZE);
            let col = Math.floor(canvasY / GRID_SIZE);
            let cell = grid[row][col];
            cell.isAliveRightNow = !cell.isAliveRightNow;
            render(grid);
        }
    </script>
</body>

</html>